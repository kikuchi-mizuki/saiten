# UAT計画書（ユーザー受け入れテスト）

**プロジェクト名**: 教授コメント自動化ボット MVP
**対象フェーズ**: Phase 1 Week 12
**作成日**: 2025-11-16
**実施予定期間**: 1週間
**テスト実施者**: 教授（エンドユーザー）

---

## 📋 目次

1. [テスト目的](#テスト目的)
2. [テスト範囲](#テスト範囲)
3. [合格基準（KPI）](#合格基準kpi)
4. [テスト環境](#テスト環境)
5. [テストシナリオ](#テストシナリオ)
6. [テストケース詳細](#テストケース詳細)
7. [データ収集項目](#データ収集項目)
8. [スケジュール](#スケジュール)
9. [報告書作成](#報告書作成)

---

## 🎯 テスト目的

### 主要目的
1. **機能検証**: システムが要件定義通りに動作するか確認
2. **品質評価**: 生成されるコメントの質が実用レベルに達しているか評価
3. **効率測定**: AI活用による作業時間削減効果を定量的に測定
4. **ユーザビリティ確認**: 教授が実際に使用できるUIになっているか検証

### 評価指標
- **Rubric採点精度**: 教授の採点との差 ±1.0以内 80%以上
- **コメント満足度**: 平均4.0以上（5点満点）
- **手直し時間削減率**: 30%以上削減
- **システム成功率**: 95%以上（エラーなく正常動作）

---

## 📐 テスト範囲

### テスト対象機能（Phase 1 MVP）

#### 1. 認証・セキュリティ
- ✅ Google OAuth ログイン
- ✅ セッション管理
- ✅ PII検出・マスキング

#### 2. コア機能
- ✅ Rubric自動採点（5項目 × 1-5点 + 理由）
- ✅ 要約生成（レポートの要点を整理）
- ✅ 教授コメント生成（過去コメント例を参照）
- ✅ RAG検索（Jaccard類似度ベース）

#### 3. データ管理
- ✅ レポート保存（暗号化付き）
- ✅ コメント生成結果保存
- ✅ 履歴一覧・詳細表示
- ✅ 履歴削除
- ✅ エクスポート機能（JSON/CSV）

#### 4. 品質評価
- ✅ 手直し時間測定
- ✅ 満足度アンケート
- ✅ 統計表示

#### 5. UI/UX
- ✅ Academic Minimal UIデザイン
- ✅ 2カラムレイアウト
- ✅ タブ切り替え（Rubric/要約/コメント）
- ✅ ローディング表示

### テスト対象外（Phase 2以降）
- ❌ 音声入力・音声出力
- ❌ PPTX/PDF資料アップロード
- ❌ 高度なRAG（Embedding + pgvector）
- ❌ 高度なダッシュボード（グラフ・可視化）

---

## ✅ 合格基準（KPI）

### 必須達成項目

| KPI項目 | 目標値 | 測定方法 |
|---------|--------|---------|
| **Rubric採点精度** | 教授の採点との差 ±1.0以内 80%以上 | 20件のレポートで測定 |
| **コメント満足度** | 平均4.0以上（5点満点） | 満足度アンケート（20件） |
| **手直し時間削減率** | 30%以上削減 | ベースライン比較 |
| **システム成功率** | 95%以上 | エラー発生率から算出 |

### 補足評価項目

| 項目 | 評価基準 |
|------|---------|
| **UI操作性** | 教授が迷わず操作できる |
| **レスポンス時間** | コメント生成が30秒以内に完了 |
| **エラー対応** | エラーメッセージが分かりやすい |
| **データ整合性** | 保存したデータが正しく取得できる |

---

## 🖥️ テスト環境

### 使用環境
- **フロントエンド**: Next.js 14 (localhost:3000 または Vercel本番環境)
- **バックエンド**: FastAPI (localhost:8000 または 本番環境)
- **データベース**: Supabase PostgreSQL
- **認証**: Supabase Auth (Google OAuth)
- **LLM**: OpenAI API (gpt-4o-mini)

### 事前準備
1. ✅ 環境変数の設定（`.env`ファイル）
2. ✅ Supabaseデータベースの初期化（`database_schema.sql`実行）
3. ✅ Google OAuth設定（Supabase Auth）
4. ✅ OpenAI APIキーの設定
5. ✅ 参照例データの準備（`data/sample_comments.json`）

### テストデータ準備
- **レポートサンプル**: 20件（reflection/final混在）
- **文字数範囲**: 200〜1000文字
- **内容**: 実際の学生レポートまたは疑似レポート

---

## 📝 テストシナリオ

### シナリオ1: 初回ログイン〜コメント生成（基本フロー）

**目的**: 初めて使用するユーザーが基本機能を問題なく使えるか確認

**手順**:
1. Google OAuth でログイン
2. ダッシュボードにアクセス
3. レポート本文を入力（500文字程度）
4. 「コメント生成」ボタンをクリック
5. Rubric採点結果を確認
6. 要約を確認
7. コメントを編集
8. コメントを保存
9. 満足度アンケートに回答

**期待結果**:
- ログインが正常に完了
- コメント生成が30秒以内に完了
- Rubric、要約、コメントが適切に表示
- 満足度アンケートが表示され、保存できる

**チェックポイント**:
- [ ] ログインがスムーズに完了するか
- [ ] UI表示が正しいか
- [ ] 生成されたコメントが自然な日本語か
- [ ] Rubricスコアが妥当か（1-5点の範囲内）
- [ ] 要約が適切か（レポートの要点を捉えているか）

---

### シナリオ2: 履歴機能のテスト

**目的**: データの保存・取得・削除が正しく動作するか確認

**手順**:
1. ダッシュボードで複数のレポート（5件）を生成
2. 「履歴」ボタンをクリック
3. 履歴一覧が表示されることを確認
4. 特定の履歴をクリックして詳細表示
5. 履歴を削除
6. 削除後、履歴一覧から消えていることを確認

**期待結果**:
- 履歴一覧に5件のレポートが表示される
- 詳細表示でRubric、要約、コメントが正しく表示される
- 削除が即座に反映される

**チェックポイント**:
- [ ] 履歴一覧が正しく表示されるか
- [ ] 詳細表示が正しいか
- [ ] 削除が正常に動作するか（データベースから物理削除される）

---

### シナリオ3: PII検出・マスキングのテスト

**目的**: 個人情報が適切に検出・マスキングされるか確認

**手順**:
1. レポート本文に以下の個人情報を含めて入力:
   - 氏名: 「山田太郎」
   - 学籍番号: 「12345678」
   - メールアドレス: 「test@example.com」
   - 電話番号: 「090-1234-5678」
2. 「コメント生成」ボタンをクリック
3. 生成されたコメントや要約に個人情報が含まれていないか確認

**期待結果**:
- 個人情報が「[氏名]」「[学籍番号]」「[メールアドレス]」「[電話番号]」にマスキングされる
- 生成されたコメント・要約にマスキング後のテキストが使用される

**チェックポイント**:
- [ ] 氏名が正しくマスキングされるか
- [ ] 学籍番号が正しくマスキングされるか
- [ ] メールアドレスが正しくマスキングされるか
- [ ] 電話番号が正しくマスキングされるか
- [ ] LLMに送信されるテキストにマスキングが適用されているか

---

### シナリオ4: エラー処理のテスト

**目的**: エラー発生時に適切なメッセージが表示されるか確認

**手順**:
1. レポート本文を空のまま「コメント生成」ボタンをクリック
2. 極端に長いレポート（10,000文字）を入力
3. ネットワークを切断してコメント生成を試行（可能であれば）

**期待結果**:
- 空の入力に対してエラーメッセージが表示される
- 長いレポートでもエラーが発生しない（または適切に処理される）
- ネットワークエラー時に分かりやすいエラーメッセージが表示される

**チェックポイント**:
- [ ] エラーメッセージが分かりやすいか
- [ ] エラー後も操作を続けられるか
- [ ] システムがクラッシュしないか

---

### シナリオ5: 統計情報の確認

**目的**: 統計情報が正しく表示されるか確認

**手順**:
1. 複数のレポート（10件）を生成し、満足度アンケートに回答
2. ダッシュボードの統計情報セクションを展開
3. 表示される統計データを確認:
   - 総コメント生成数
   - 平均Rubric点数（5項目別）
   - 平均手直し時間
   - 平均満足度

**期待結果**:
- 統計情報が正しく計算・表示される
- 項目別のRubric平均点が表示される
- 平均手直し時間が「X分Y秒」形式で表示される

**チェックポイント**:
- [ ] 総コメント生成数が正しいか
- [ ] 平均Rubric点数が正しいか
- [ ] 平均手直し時間が正しいか
- [ ] 平均満足度が正しいか

---

## 📊 テストケース詳細

### テストケース一覧（20件のレポート）

| No. | レポート種別 | 文字数 | 内容カテゴリ | 想定Rubric点数範囲 | 備考 |
|-----|------------|--------|------------|------------------|------|
| 1 | reflection | 300 | 戦略立案 | 3-4点 | 基本的な内容 |
| 2 | reflection | 500 | 組織変革 | 4-5点 | 具体例あり |
| 3 | reflection | 400 | 顧客分析 | 3-4点 | 論理的構成 |
| 4 | reflection | 600 | KPI設定 | 4-5点 | 実践的内容 |
| 5 | reflection | 350 | 価格戦略 | 3-4点 | 基本的な内容 |
| 6 | reflection | 700 | 市場分析 | 4-5点 | 詳細な考察 |
| 7 | reflection | 450 | 競合分析 | 3-4点 | 標準的な内容 |
| 8 | reflection | 550 | 事業戦略 | 4-5点 | 具体例あり |
| 9 | reflection | 400 | リスク管理 | 3-4点 | 論理的構成 |
| 10 | reflection | 650 | イノベーション | 4-5点 | 独自性あり |
| 11 | final | 800 | 総括（全体評価） | 4-5点 | 成長が見える |
| 12 | final | 900 | 総括（実践応用） | 4-5点 | 実践的視点 |
| 13 | final | 750 | 総括（学びの統合） | 4-5点 | 統合的考察 |
| 14 | final | 850 | 総括（将来展望） | 4-5点 | 将来への示唆 |
| 15 | final | 700 | 総括（経験と理論） | 3-4点 | 標準的な内容 |
| 16 | reflection | 200 | 簡潔な内容 | 2-3点 | 短いレポート |
| 17 | reflection | 1000 | 詳細な分析 | 4-5点 | 長いレポート |
| 18 | reflection | 500 | PII含む | 3-4点 | 個人情報テスト |
| 19 | reflection | 450 | エラーケース | - | エラー処理テスト |
| 20 | final | 800 | 総括（振り返り） | 4-5点 | 最終評価 |

### 各テストケースの実施手順

**各レポートに対して以下を実施**:

1. **事前準備**:
   - レポート本文を準備（実際の学生レポートまたは疑似データ）
   - 教授が手動で採点した場合のRubricスコアを記録（比較用）

2. **テスト実施**:
   1. レポート本文を入力
   2. 「コメント生成」ボタンをクリック
   3. 生成時間を測定（開始〜完了まで）
   4. Rubric採点結果を確認・記録
   5. 要約を確認・評価
   6. コメントを確認・評価
   7. コメントを必要に応じて編集
   8. 「保存」ボタンをクリック（手直し時間測定開始）
   9. 満足度アンケートに回答（1-5点 + コメント）

3. **データ記録**:
   - 教授の採点結果とAI採点結果の差分
   - 手直し時間（秒）
   - 満足度スコア（1-5）
   - フィードバックコメント
   - エラー発生有無

---

## 📈 データ収集項目

### 1. Rubric採点精度データ

**収集項目**:
- レポートNo.
- 教授の採点結果（理解度、論理性、独自性、実践性、表現力）
- AI採点結果（理解度、論理性、独自性、実践性、表現力）
- 差分（教授 - AI）
- 差分が±1.0以内かどうか（Yes/No）

**記録フォーマット（CSV）**:
```csv
レポートNo,項目,教授採点,AI採点,差分,許容範囲内
1,理解度,4,3,-1,Yes
1,論理性,4,4,0,Yes
1,独自性,3,3,0,Yes
1,実践性,4,3,-1,Yes
1,表現力,3,4,1,Yes
...
```

### 2. 手直し時間データ

**収集項目**:
- レポートNo.
- 生成時間（秒）
- 手直し時間（秒）
- 総作業時間（生成時間 + 手直し時間）
- ベースライン作業時間（AI不使用時）
- 削減時間（ベースライン - 総作業時間）
- 削減率（削減時間 / ベースライン × 100%）

**記録フォーマット（CSV）**:
```csv
レポートNo,生成時間,手直し時間,総作業時間,ベースライン,削減時間,削減率
1,15,120,135,300,165,55%
2,18,90,108,280,172,61%
...
```

### 3. 満足度データ

**収集項目**:
- レポートNo.
- 満足度スコア（1-5）
- フィードバックコメント

**記録フォーマット（CSV）**:
```csv
レポートNo,満足度,フィードバック
1,4,"コメントの文体が良い。もう少し具体的な示唆があると嬉しい。"
2,5,"非常に良い。参照例に近い文体で生成されている。"
...
```

### 4. エラーログ

**収集項目**:
- 日時
- レポートNo.
- エラー種別（生成エラー、保存エラー、認証エラー等）
- エラーメッセージ
- 対処方法

**記録フォーマット（CSV）**:
```csv
日時,レポートNo,エラー種別,エラーメッセージ,対処方法
2025-11-16 10:30,5,生成エラー,"OpenAI API timeout",リトライで成功
...
```

---

## 📅 スケジュール

### Week 12（1週間）

| 日 | 作業内容 | 所要時間 |
|----|---------|---------|
| **Day 1（月）** | UAT準備・環境確認 | 2時間 |
| | - UAT計画書の最終確認 | 30分 |
| | - テスト環境のセットアップ確認 | 30分 |
| | - テストデータ準備（20件のレポート） | 1時間 |
| **Day 2（火）** | ベースライン測定 | 2時間 |
| | - AI不使用で5件のレポートにコメント作成 | 1.5時間 |
| | - 作業時間を記録 | 30分 |
| **Day 3（水）** | UAT実施（前半10件） | 3時間 |
| | - テストケース1-10を実施 | 2.5時間 |
| | - データ記録 | 30分 |
| **Day 4（木）** | UAT実施（後半10件） | 3時間 |
| | - テストケース11-20を実施 | 2.5時間 |
| | - データ記録 | 30分 |
| **Day 5（金）** | データ分析・報告書作成 | 3時間 |
| | - 収集データの集計・分析 | 1.5時間 |
| | - UAT報告書作成 | 1.5時間 |
| **Day 6-7（土日）** | バッファ・追加テスト | 必要に応じて |

**合計所要時間**: 約13時間（1週間）

---

## 📄 報告書作成

### UAT報告書の構成

UAT実施後、以下の構成で報告書を作成します（`docs/uat_report.md`）：

1. **実施概要**
   - 実施期間
   - 実施者
   - テスト環境
   - テストケース数

2. **KPI達成状況**
   - Rubric採点精度: ±1.0以内 XX%（目標80%以上）
   - コメント満足度: 平均X.X点（目標4.0以上）
   - 手直し時間削減率: XX%（目標30%以上）
   - システム成功率: XX%（目標95%以上）

3. **詳細結果**
   - Rubric採点精度の詳細データ
   - 手直し時間の詳細データ
   - 満足度の詳細データ
   - エラーログ

4. **発見された問題点**
   - 問題の内容
   - 発生頻度
   - 重要度（High/Medium/Low）
   - 対処方法

5. **改善提案**
   - UIの改善点
   - 機能の改善点
   - パフォーマンスの改善点

6. **総合評価**
   - Phase 1 MVPの完成度評価
   - Phase 2-Aへの移行可否判断
   - 次のステップ

---

## ✅ UAT完了チェックリスト

### テスト実施前
- [ ] UAT計画書の承認
- [ ] テスト環境の準備完了
- [ ] テストデータ（20件のレポート）の準備完了
- [ ] ベースライン測定の実施
- [ ] 教授へのテスト手順説明

### テスト実施中
- [ ] 全20件のテストケース実施
- [ ] Rubric採点結果の記録
- [ ] 手直し時間の記録
- [ ] 満足度アンケートの記録
- [ ] エラーログの記録

### テスト実施後
- [ ] データの集計・分析
- [ ] UAT報告書の作成
- [ ] 発見された問題点のリスト化
- [ ] 改善提案のまとめ
- [ ] Phase 2-A移行可否の判断

---

## 📞 問い合わせ先

**テスト実施中の問題・質問**:
- 技術的な問題: [開発者連絡先]
- 操作方法の質問: [サポート連絡先]

---

**以上**
