# 出力品質評価フレームワーク（簡易版）

教授コメント自動化Botの出力品質を評価するための簡易フレームワークです。

---

## 📊 評価観点

### 1. 文体の一貫性（1〜5点）

- **5点**: 教授の語り口が完全に再現されている。温かみ・敬意・示唆のバランスが完璧
- **4点**: 概ね再現されている。一部表現が硬い/緩い
- **3点**: 基本的なトーンは合っているが、文体がまだ統一されていない
- **2点**: トーンは合っているが、表現が機械的/不自然
- **1点**: 教授の語り口とは大きく異なる

**チェックポイント**
- 「〜が見えます」「〜をおすすめします」などの表現が使われているか
- 「あり方」「次の一歩」が自然に含まれているか
- 断定しすぎていないか（「〜すべき」など）

---

### 2. 次の一歩の妥当性（1〜5点）

- **5点**: 講義の文脈に完璧に合致し、具体的で実行可能
- **4点**: 文脈に合っており、具体的
- **3点**: 文脈は合っているが、やや抽象的
- **2点**: 文脈との整合性がやや低い、または抽象的すぎる
- **1点**: 講義の文脈と大きくずれている、または具体性がない

**チェックポイント**
- 仮説検証・KPI設定・顧客観察など具体的なアクションが示されているか
- 講義テーマ（経営戦略論）に合致しているか
- 学生のレポート内容と関連しているか

---

### 3. 過度な断定・誤誘導の抑制（1〜5点）

- **5点**: 断定は一切なく、伴走する姿勢が一貫している
- **4点**: ほぼ断定なし。一部やや強い表現がある
- **3点**: 概ね適切だが、一部断定表現がある
- **2点**: 断定表現が多く、伴走する姿勢が弱い
- **1点**: 断定が多く、教授らしい語り口ではない

**チェックポイント**
- 「〜すべき」「〜しなければならない」などの断定表現がないか
- 「〜をおすすめします」「〜を意識してみましょう」などの提案表現になっているか
- 過度な批判や否定がないか

---

### 4. 文字数・構成の遵守（1〜5点）

- **5点**: 300〜400文字、3段「○」構成が完璧
- **4点**: 文字数・構成は概ね守られている
- **3点**: 文字数・構成に一部不備がある
- **2点**: 文字数・構成が大きくずれている
- **1点**: 文字数・構成が守られていない

**チェックポイント**
- 総文字数: 300〜400文字
- 段落数: 3段（すべて「○」で開始）
- 各段落の文字数バランス: 1段100〜130、2段100〜150、3段100〜120

---

### 5. Rubricスコアの妥当性（1〜5点）

- **5点**: 自動算出されたスコアが学生のレポート内容と完全に一致
- **4点**: 概ね一致している
- **3点**: 一部観点でずれがある
- **2点**: 複数観点でずれがある
- **1点**: スコアが大きくずれている

**チェックポイント**
- 理解度: 講義内容を正確に理解しているか
- 論理性: 主張と根拠が一貫しているか
- 独自性: 自身の経験・視点が反映されているか
- 実践性: 現場応用に現実味があるか
- 表現力: 構成・言葉が明快で伝わりやすいか

---

## 📋 評価シート（テンプレート）

### 評価対象: レポートID _______

| 観点 | スコア | コメント |
| --- | --- | --- |
| 文体の一貫性 | __ / 5 | |
| 次の一歩の妥当性 | __ / 5 | |
| 過度な断定・誤誘導の抑制 | __ / 5 | |
| 文字数・構成の遵守 | __ / 5 | |
| Rubricスコアの妥当性 | __ / 5 | |
| **合計** | __ / 25 | |

### 総合評価

- **20点以上**: 優秀（そのまま使用可能）
- **15〜19点**: 良好（軽微な修正で使用可能）
- **10〜14点**: 要改善（修正が必要）
- **10点未満**: 要再生成（大きな見直しが必要）

---

## 🔄 評価実施手順

### 1. サンプルレポート準備（5〜10件）

- 実際の学生レポート（匿名化済み）または模擬レポート
- 講義テーマ（仮説検証・KPI・顧客価値など）が均等に分布

### 2. 生成実行

- UIで各レポートを貼り付けて「採点＆下書きを生成」
- 生成結果（AI下書き）とRubricスコアを記録

### 3. 評価実施

- 上記評価シートに各観点（1〜5点）を記入
- コメント欄に具体的な改善点を記載

### 4. 集計・分析

- 各レポートの合計点を算出
- 観点別の平均点を算出（どの観点が弱いか特定）
- 改善アクションを決定

---

## 🎯 改善アクション例

### 文体の一貫性が低い場合

- **アクション**: プロンプトの語り口例を追加、サンプルコメントを拡充
- **修正対象**: `prompts/reflection.txt`, `data/sample_comments.json`

### 次の一歩の妥当性が低い場合

- **アクション**: プロンプトの構成ガイドを強化、キーワードマッピングを拡充
- **修正対象**: `prompts/reflection.txt`, `api/main.py` の `choose_next_step()`

### 断定表現が多い場合

- **アクション**: プロンプトの禁止事項を強化、禁止表現リストを追加
- **修正対象**: `prompts/reflection.txt`

### 文字数・構成の遵守が低い場合

- **アクション**: LLMのmax_tokens調整、ヒューリスティック生成の文字数制御を強化
- **修正対象**: `api/main.py` の `call_openai()`, `generate_reflection_draft()`

---

## 📊 継続改善

### 週次レビュー

- 週に1回、5〜10件のレポートで評価を実施
- 観点別の平均点を追跡
- 改善アクションの効果を確認

### 月次分析

- 月に1回、評価結果を集計・分析
- プロンプト・サンプルコメントの改善を反映
- 教授からのフィードバックを反映

---

## 💡 参考

- プロンプト: `prompts/reflection.txt`
- サンプルコメント: `data/sample_comments.json`
- API実装: `api/main.py`

