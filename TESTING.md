# Phase 1 動作確認手順

## 1. サーバー起動

### APIサーバーの起動

```bash
# プロジェクトルートディレクトリで実行
cd /Users/kikuchimizuki/Desktop/02_榎戸さん_採点システム/saiten

# APIサーバーを起動（ポート8010で起動）
uvicorn api.main:app --reload --port 8010
```

正常に起動すると、以下のメッセージが表示されます：
```
INFO:     Uvicorn running on http://127.0.0.1:8010 (Press CTRL+C to quit)
```

### UIサーバーの起動

別のターミナルで実行：

```bash
# プロジェクトルートディレクトリで実行
cd /Users/kikuchimizuki/Desktop/02_榎戸さん_採点システム/saiten

# Streamlit UIを起動
streamlit run app/streamlit_app.py
```

正常に起動すると、ブラウザが自動的に開き、以下のURLが表示されます：
```
http://localhost:8501
```

## 2. 動作確認項目

### ✅ 基本機能の確認

#### 1. レポート入力と生成
- [ ] レポート本文をテキストエリアに貼り付け
- [ ] 「🎯 採点＆下書きを生成」ボタンをクリック
- [ ] コメントが生成されることを確認
- [ ] LLM診断が表示されることを確認（「✅ LLM: 有効」または「⚠️ LLM: 未使用（フォールバック）」）

#### 2. タブ切替機能
- [ ] 「📝 コメント」タブで生成されたコメントが表示されることを確認
- [ ] 「📊 Rubric」タブをクリック
  - [ ] 合計スコア（/25）が表示されることを確認
  - [ ] 5観点（理解度・論理性・独自性・実践性・表現力）が表示されることを確認
  - [ ] 各観点のプログレスバーが表示されることを確認
- [ ] 「📄 要約」タブをクリック
  - [ ] 要約が表示されることを確認
  - [ ] 「エグゼクティブサマリー」「箇条書き」「構造化」の3形式が切り替えられることを確認

#### 3. コメント編集機能
- [ ] コメントテキストエリアでコメントを編集できることを確認
- [ ] 編集した内容が保持されることを確認

#### 4. コピー機能
- [ ] 「📋 コピー」ボタンをクリック
- [ ] 「コピーしました」のトーストが表示されることを確認
- [ ] クリップボードにコメントがコピーされることを確認（他のアプリに貼り付けて確認）

#### 5. クリア機能
- [ ] 「🗑️ クリア」ボタンをクリック
- [ ] コメント、Rubric、要約がすべてクリアされることを確認

### ✅ 要約機能の詳細確認

#### エグゼクティブサマリー
- [ ] 200文字程度の要約が表示されることを確認
- [ ] レポートの要点が含まれていることを確認

#### 箇条書き要約
- [ ] 主要ポイントが5つ程度表示されることを確認
- [ ] 各ポイントが適切に箇条書きで表示されることを確認

#### 構造化要約
- [ ] 主要テーマ、要点、考察の深さ、実践性が表示されることを確認
- [ ] 各項目が適切に構造化されていることを確認

### ✅ Rubric採点の確認

#### スコア表示
- [ ] 合計スコアが正しく計算されていることを確認（5観点の合計）
- [ ] 各観点のスコアが1〜5の範囲内であることを確認
- [ ] プログレスバーがスコアに応じて表示されることを確認

#### スコアの妥当性
- [ ] レポートの内容に応じて適切なスコアが付与されていることを確認
- [ ] 長文レポートで表現力のスコアが高くなることを確認
- [ ] 具体例があるレポートで実践性のスコアが高くなることを確認

## 3. テスト用レポート例

以下のサンプルレポートを使用して動作確認してください：

```
今回の講義を通じて、経営戦略における価値創造の重要性を学びました。
特に、利益は価値創造の評価として捉えるべきであり、目的化してはいけないという点が印象的でした。

具体的には、自社の事例として、顧客満足度を向上させることで結果的に利益が向上した経験があります。
この経験から、価値創造を第一に考える経営の重要性を実感しました。

今後は、KPIの設定においても、価値創造を起点とした指標設計を意識していきたいと思います。
また、仮説検証のサイクルを回すことで、より実践的な経営判断ができるようになると考えています。
```

## 4. エラー確認

### API接続エラー
- [ ] APIサーバーが起動していない場合、適切なエラーメッセージが表示されることを確認
- [ ] 自動ポート検出が機能することを確認（8010→8001→8000の順で試行）

### 空入力エラー
- [ ] レポート本文が空の状態で生成ボタンをクリック
- [ ] 「⚠️ レポート本文を貼り付けてください。」のエラーメッセージが表示されることを確認

## 5. 確認チェックリスト

- [ ] APIサーバーが正常に起動する
- [ ] UIサーバーが正常に起動する
- [ ] レポート入力と生成が正常に動作する
- [ ] タブ切替が正常に動作する
- [ ] Rubric採点結果が正しく表示される
- [ ] 要約機能が3形式すべてで正常に動作する
- [ ] コメント編集が正常に動作する
- [ ] コピー機能が正常に動作する
- [ ] クリア機能が正常に動作する
- [ ] エラーハンドリングが適切に動作する

## 6. トラブルシューティング

### APIサーバーが起動しない場合
- Pythonのバージョンを確認（Python 3.8以上が必要）
- 必要なパッケージがインストールされているか確認：`pip install fastapi uvicorn`
- ポート8010が既に使用されている場合は、別のポートを指定：`--port 8001`

### UIサーバーが起動しない場合
- Streamlitがインストールされているか確認：`pip install streamlit`
- ポート8501が既に使用されている場合は、別のポートが自動的に割り当てられます

### コメントが生成されない場合
- APIサーバーが起動しているか確認
- ブラウザのコンソールでエラーを確認
- APIサーバーのログを確認

### Rubricや要約が表示されない場合
- APIレスポンスに`rubric`と`summary`が含まれているか確認
- ブラウザの開発者ツールでネットワークタブを確認
- APIサーバーのログを確認

